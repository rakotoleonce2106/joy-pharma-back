App\Entity\User:
    operations:
        get_collection:
            class: ApiPlatform\Metadata\GetCollection
            openapi:
                security:
                    -   JWT: [ 'ROLE_ADMIN' ]

        post:
            class: ApiPlatform\Metadata\Post
            processor: App\State\UserPasswordHasher
            uriTemplate: "/register"
            validationContext:
                groups: ['Default', 'user:create']
            normalizationContext:
                groups: [ 'id:read',"user:read" ]
            input_formats:
                multipart: [ 'multipart/form-data' ]

        get:
            class: ApiPlatform\Metadata\Get
            openapi:
                security:
                    -   JWT: [ 'ROLE_ADMIN' ]

        patch:
            class: ApiPlatform\Metadata\Post
            uriTemplate: "/user/update"
            validationContext:
                groups: ['user:update' ]
            normalizationContext:
                groups: ['id:read', "user:read" ]
            security: "is_granted('ROLE_USER')"
            input_formats:
                multipart: [ 'multipart/form-data' ]
            processor: App\State\UserUpdateProcessor
            
            

        facebook_login:
            method: "POST"
            class: ApiPlatform\Metadata\Post
            controller: 'App\Controller\Api\FacebookAuthController'
            input: 'App\Dto\SocialInput'
            public: true
            uriTemplate: "/facebook_login"
            openapi:
                summary: "Facebook login"
                description: "Facebook login."

        google_login:
            method: "POST"
            class: ApiPlatform\Metadata\Post
            controller: 'App\Controller\Api\GoogleAuthController'
            public: true
            input: 'App\Dto\SocialInput'
            uriTemplate: "/google_login"
            openapi:
                summary: "Google login"
                description: "Google login."
            

        delete:
            class: ApiPlatform\Metadata\Delete
            openapi:
                security:
                    -   JWT: [ 'ROLE_ADMIN' ]
            
        current_user:
            class: ApiPlatform\Metadata\Get
            security: 'is_granted("ROLE_USER")'
            securityMessage: 'Only authenticated users can get current user.'
            method: GET
            uriTemplate: "/me"
            controller: App\Controller\Api\MeController
            normalizationContext:
                groups: ['id:read', "user:read" ]
            read: false
            uriVariables: []
            openapiContext:
                summary: Retrieves the current user resource.
                description: >
                    Retrieves the current user resource.
            openapi:
                security:
                    -   JWT: [ 'ROLE_USER' ]

    normalizationContext:
        groups: ['id:read','user:read']

    denormalizationContext:
        groups: ['user:create', 'user:update']
        


