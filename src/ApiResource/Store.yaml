App\Entity\Store:
    operations:
        admin_get_stores:
            class: ApiPlatform\Metadata\GetCollection
            uriTemplate: '/admin/stores'
            security: 'is_granted("ROLE_ADMIN")'
            normalizationContext:
                groups: ['id:read', 'store:read', 'location:read', 'user:store:read', 'store_setting:read']
            openapi:
                summary: 'List all stores (Admin)'

        admin_get_store:
            class: ApiPlatform\Metadata\Get
            uriTemplate: '/admin/stores/{id}'
            security: 'is_granted("ROLE_ADMIN")'
            normalizationContext:
                groups: ['id:read', 'store:read', 'location:read', 'user:store:read', 'store_setting:read']
            openapi:
                summary: 'Get store by ID (Admin)'

        admin_create_store:
            class: ApiPlatform\Metadata\Post
            uriTemplate: '/admin/stores'
            security: 'is_granted("ROLE_ADMIN")'
            input: App\Dto\Admin\StoreInput
            inputFormats:
                multipart: ['multipart/form-data']
            processor: App\State\Admin\StoreProcessor
            normalizationContext:
                groups: ['id:read', 'store:read', 'location:read', 'user:store:read', 'store_setting:read']
            openapi:
                summary: 'Create new store (Admin)'
                description: 'Create a new store with optional image'
                requestBody:
                    content:
                        multipart/form-data:
                            schema:
                                type: object
                                required:
                                    - name
                                    - ownerEmail
                                properties:
                                    name:
                                        type: string
                                        description: 'Store name (required)'
                                    ownerEmail:
                                        type: string
                                        format: email
                                        description: 'Store owner email (required)'
                                    description:
                                        type: string
                                        description: 'Store description'
                                    address:
                                        type: string
                                        description: 'Store address'
                                    latitude:
                                        type: number
                                        format: float
                                        description: 'Store latitude'
                                    longitude:
                                        type: number
                                        format: float
                                        description: 'Store longitude'
                                    image:
                                        type: string
                                        format: binary
                                        description: 'Store image file (JPEG, PNG, GIF, WebP)'

        admin_update_store:
            class: ApiPlatform\Metadata\Put
            uriTemplate: '/admin/stores/{id}'
            security: 'is_granted("ROLE_ADMIN")'
            input: App\Dto\Admin\StoreInput
            inputFormats:
                multipart: ['multipart/form-data']
            processor: App\State\Admin\StoreProcessor
            normalizationContext:
                groups: ['id:read', 'store:read', 'location:read', 'user:store:read', 'store_setting:read']
            openapi:
                summary: 'Update store (Admin)'
                description: 'Update store information including image'
                requestBody:
                    content:
                        multipart/form-data:
                            schema:
                                type: object
                                properties:
                                    name:
                                        type: string
                                        description: 'Store name'
                                    ownerEmail:
                                        type: string
                                        format: email
                                        description: 'Store owner email'
                                    description:
                                        type: string
                                        description: 'Store description'
                                    address:
                                        type: string
                                        description: 'Store address'
                                    latitude:
                                        type: number
                                        format: float
                                        description: 'Store latitude'
                                    longitude:
                                        type: number
                                        format: float
                                        description: 'Store longitude'
                                    image:
                                        type: string
                                        format: binary
                                        description: 'Store image file (JPEG, PNG, GIF, WebP)'

        admin_delete_store:
            class: ApiPlatform\Metadata\Delete
            uriTemplate: '/admin/stores/{id}'
            security: 'is_granted("ROLE_ADMIN")'
            openapi:
                summary: 'Delete store (Admin)'

        admin_batch_delete_stores:
            class: ApiPlatform\Metadata\Post
            uriTemplate: '/admin/stores/batch-delete'
            security: 'is_granted("ROLE_ADMIN")'
            input: App\Dto\Admin\BatchDeleteInput
            processor: App\State\Admin\BatchDeleteProcessor
            openapi:
                summary: 'Batch delete stores (Admin)'

    normalizationContext:
        groups: ['id:read', 'store:read', 'location:read', 'user:store:read']

