App\Entity\StoreProduct:
    operations:
        get_store_product:
            method: 'GET'
            class: ApiPlatform\Metadata\Get
            uriTemplate: '/store_products/{id}'
            security: 'is_granted("ROLE_STORE")'
            provider: App\State\Product\StoreProductItemProvider
            normalizationContext:
                groups: ['id:read','store-product:read', 'product:read','image:read','media_object:read']
            openapi:
                summary: 'Get a store product'
                description: 'Get a store product by id (only accessible by store owner)'
                parameters:
                    - name: 'id'
                      in: 'path'
                      description: 'The id of the store product'

        get_store_products:
            method: 'GET'
            class: ApiPlatform\Metadata\GetCollection
            uriTemplate: '/store_products'
            security: 'is_granted("ROLE_STORE")'
            provider: App\State\Product\StoreProductProvider
            normalizationContext:
                groups:  ['id:read','store-product:read', 'product:read','image:read']
            format: 'json'
            openapi:
                summary: 'Get all store products'
                description: 'Get all store products for the authenticated store owner'

        post_store_product:
            method: 'POST'
            class: ApiPlatform\Metadata\Post
            uriTemplate: '/store_products'
            security: 'is_granted("ROLE_STORE")'
            processor: App\State\Product\StoreProductCreateProcessor
            denormalizationContext:
                groups: ['store-product:write']
            normalizationContext:
                groups: ['id:read','store-product:read', 'product:read','image:read','media_object:read']
            format: 'json'
            openapi:
                summary: 'Create a store product'
                description: 'Create a new store product (only accessible by store owner)'

        put_store_product:
            method: 'PUT'
            class: ApiPlatform\Metadata\Put
            uriTemplate: '/store_products/{id}'
            security: 'is_granted("ROLE_STORE")'
            processor: App\State\Product\StoreProductUpdateProcessor
            denormalizationContext:
                groups: ['store-product:write']
            normalizationContext:
                groups: ['id:read','store-product:read', 'product:read','image:read','media_object:read']
            format: 'json'
            openapi:
                summary: 'Update a store product'
                description: 'Update a store product by id (only accessible by store owner who owns the product)'
                parameters:
                    - name: 'id'
                      in: 'path'
                      description: 'The id of the store product'

        admin_get_store_products:
            class: ApiPlatform\Metadata\GetCollection
            uriTemplate: '/admin/store-products'
            security: 'is_granted("ROLE_ADMIN")'
            normalizationContext:
                groups: ['id:read','store-product:read','product:read','image:read','media_object:read','store:read','location:read','user:store:read','store_setting:read']
            openapi:
                summary: 'List all store products (Admin)'
                description: 'List every store product across all stores (Admin only)'

        admin_get_store_product:
            class: ApiPlatform\Metadata\Get
            uriTemplate: '/admin/store-products/{id}'
            security: 'is_granted("ROLE_ADMIN")'
            normalizationContext:
                groups: ['id:read','store-product:read','product:read','image:read','media_object:read','store:read','location:read','user:store:read','store_setting:read']
            openapi:
                summary: 'Get store product by ID (Admin)'
                description: 'Retrieve any store product by ID (Admin only)'

        admin_create_store_product:
            class: ApiPlatform\Metadata\Post
            uriTemplate: '/admin/store-products'
            security: 'is_granted("ROLE_ADMIN")'
            inputFormats:
                json: ['application/json']
                jsonld: ['application/ld+json']
            denormalizationContext:
                groups: ['store-product:write']
            validationContext:
                groups: ['create']
            normalizationContext:
                groups: ['id:read','store-product:read','product:read','image:read','media_object:read','store:read','location:read','user:store:read','store_setting:read']
            openapi:
                summary: 'Create store product (Admin)'
                description: 'Create a new store product. Use Content-Type: application/ld+json when sending IRIs. Product and Store must be provided as IRIs (e.g., "/api/products/1", "/api/admin/stores/1").'

        admin_update_store_product:
            class: ApiPlatform\Metadata\Put
            uriTemplate: '/admin/store-products/{id}'
            security: 'is_granted("ROLE_ADMIN")'
            inputFormats:
                json: ['application/json']
                jsonld: ['application/ld+json']
            denormalizationContext:
                groups: ['store-product:write']
            normalizationContext:
                groups: ['id:read','store-product:read','product:read','image:read','media_object:read','store:read','location:read','user:store:read','store_setting:read']
            openapi:
                summary: 'Update store product (Admin) - Full update'
                description: 'Update store product information. Use Content-Type: application/ld+json when sending IRIs. For partial updates, use PATCH instead.'

        admin_patch_store_product:
            class: ApiPlatform\Metadata\Patch
            uriTemplate: '/admin/store-products/{id}'
            security: 'is_granted("ROLE_ADMIN")'
            inputFormats:
                json: ['application/json']
                jsonld: ['application/ld+json']
            denormalizationContext:
                groups: ['store-product:write']
            normalizationContext:
                groups: ['id:read','store-product:read','product:read','image:read','media_object:read','store:read','location:read','user:store:read','store_setting:read']
            openapi:
                summary: 'Update store product (Admin) - Partial update'
                description: 'Partially update store product information. Only provide the fields you want to update. Use Content-Type: application/ld+json when sending IRIs.'

        admin_delete_store_product:
            class: ApiPlatform\Metadata\Delete
            uriTemplate: '/admin/store-products/{id}'
            security: 'is_granted("ROLE_ADMIN")'
            openapi:
                summary: 'Delete store product (Admin)'
                description: 'Delete a store product by ID (Admin only)'

    normalizationContext:
        groups: ['id:read','store-product:read','product:read','image:read','media_object:read']
    denormalizationContext:
        groups: ['store-product:write']
                      
