App\Entity\StoreProduct:
    operations:
        get_store_product:
            method: 'GET'
            class: ApiPlatform\Metadata\Get
            uriTemplate: '/store_products/{id}'
            security: 'is_granted("ROLE_STORE")'
            provider: App\State\Product\StoreProductItemProvider
            normalizationContext:
                groups: ['id:read','store-product:read', 'product:read','image:read']
            openapi:
                summary: 'Get a store product'
                description: 'Get a store product by id (only accessible by store owner)'
                parameters:
                    - name: 'id'
                      in: 'path'
                      description: 'The id of the store product'

        get_store_products:
            method: 'GET'
            class: ApiPlatform\Metadata\GetCollection
            uriTemplate: '/store_products'
            security: 'is_granted("ROLE_STORE")'
            provider: App\State\Product\StoreProductProvider
            normalizationContext:
                groups:  ['id:read','store-product:read', 'product:read','image:read']
            format: 'json'
            openapi:
                summary: 'Get all store products'
                description: 'Get all store products for the authenticated store owner'

        post_store_product:
            method: 'POST'
            class: ApiPlatform\Metadata\Post
            uriTemplate: '/store_products'
            security: 'is_granted("ROLE_STORE")'
            processor: App\State\Product\StoreProductCreateProcessor
            denormalizationContext:
                groups: ['store-product:write']
            normalizationContext:
                groups: ['id:read','store-product:read', 'product:read','image:read']
            format: 'json'
            openapi:
                summary: 'Create a store product'
                description: 'Create a new store product (only accessible by store owner)'

        put_store_product:
            method: 'PUT'
            class: ApiPlatform\Metadata\Put
            uriTemplate: '/store_products/{id}'
            security: 'is_granted("ROLE_STORE")'
            processor: App\State\Product\StoreProductUpdateProcessor
            denormalizationContext:
                groups: ['store-product:write']
            normalizationContext:
                groups: ['id:read','store-product:read', 'product:read','image:read']
            format: 'json'
            openapi:
                summary: 'Update a store product'
                description: 'Update a store product by id (only accessible by store owner who owns the product)'
                parameters:
                    - name: 'id'
                      in: 'path'
                      description: 'The id of the store product'

    normalizationContext:
        groups: ['id:read','store-product:read','product:read','image:read']
    denormalizationContext:
        groups: ['store-product:write']
                      
