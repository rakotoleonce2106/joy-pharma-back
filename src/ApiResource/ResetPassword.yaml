App\Entity\ResetPassword:
    operations:
        send_reset_email:
            method: "POST"
            class: ApiPlatform\Metadata\Post
            controller: 'App\Controller\Api\SendEmailResetPasswordController'
            input: 'App\Dto\ResetPasswordInput'
            uriTemplate: "/password/forgot"
            normalizationContext:
                groups: ['send_email:write']
            openapi:
                summary: "Send password reset email"
                description: "Send a 6-digit reset code to the user's email address"
                requestBody:
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    email:
                                        type: string
                                        format: email
                                required:
                                    - email
            public: true

        check_reset_code:
            method: "POST"
            class: ApiPlatform\Metadata\Post
            controller: 'App\Controller\Api\CheckCodeResetPasswordController'
            input: 'App\Dto\ResetPasswordInput'
            uriTemplate: "/password/verify-code"
            normalizationContext:
                groups: ['check_code:write']
            openapi:
                summary: "Verify password reset code"
                description: "Verify that the reset code is valid and not expired"
                requestBody:
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    email:
                                        type: string
                                        format: email
                                    code:
                                        type: string
                                        minLength: 4
                                        maxLength: 6
                                required:
                                    - email
                                    - code
            public: true

        reset_password:
            method: "POST"
            class: ApiPlatform\Metadata\Post
            controller: 'App\Controller\Api\ResetPasswordController'
            input: 'App\Dto\ResetPasswordInput'
            uriTemplate: "/password/reset"
            normalizationContext:
                groups: ['reset_password:write']
            openapi:
                summary: "Reset password"
                description: "Reset user password with validated code"
                requestBody:
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    email:
                                        type: string
                                        format: email
                                    code:
                                        type: string
                                        minLength: 4
                                        maxLength: 6
                                    password:
                                        type: string
                                        minLength: 8
                                required:
                                    - email
                                    - code
                                    - password
            public: true

