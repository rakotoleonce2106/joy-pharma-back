App\Entity\Order:
    operations:
        post_order:
            class: ApiPlatform\Metadata\Post
            uriTemplate: "/order"
            input: App\Dto\OrderInput
            processor: App\State\Order\OrderCreateProcessor
            format: 'json'
            normalizationContext:
                groups: ['id:read','order:read','location:read','user:read','product:read','image:read']
            openapi:
                summary: 'Create a order'
                description: 'Create a order'

                
        get_order:
            method: 'GET'
            class: ApiPlatform\Metadata\Get
            uriTemplate: '/order/{id}'
            normalizationContext:
                groups: ['order:read','location:read','user:read','product:read','image:read']
            openapi:
                summary: 'Get a order'
                description: 'Get a order by id'
                parameters:
                    - name: 'id'
                      in: 'path'
                      description:  'The id of the order'

        get_orders:
            method: 'GET'
            class: ApiPlatform\Metadata\GetCollection
            uriTemplate: '/orders'
            normalizationContext:
                groups: ['order:read','location:read','user:read','product:read','image:read']
            openapi:
                summary: 'Get all orders'
                description: 'Get all orders'
                security:
                    -   JWT: [ 'ROLE_ADMIN','ROLE_USER','ROLE_STORE','ROLE_DELIVER' ]

        store_update_order:
            class: ApiPlatform\Metadata\Put
            uriTemplate: '/store/order/{id}'
            input: App\Dto\StoreUpdateOrderInput
            processor: App\State\Store\StoreUpdateOrderProcessor
            format: 'json'
            security: 'is_granted("ROLE_STORE")'
            normalizationContext:
                groups: ['order:read','location:read','user:read','product:read','image:read']
            openapi:
                summary: 'Store updates order with order item actions'
                description: 'Store owner updates an order by accepting, refusing, or suggesting alternatives for multiple order items in one request'
                security:
                    - JWT: ['ROLE_STORE']
                parameters:
                    - name: id
                      in: path
                      required: true
                      description: 'The ID of the order to update'
                      schema:
                          type: integer

    normalizationContext:
        groups: ['id:read','order:read']
                      
